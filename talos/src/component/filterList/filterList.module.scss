@use '../../styles/palette.scss' as *;
@use '../../styles/curves.scss' as *;

/* Animatable custom properties controlling mask fades (0 = off, 1 = on) */
@property --leftFade {
    syntax: '<number>';
    inherits: false;
    initial-value: 0;
}
@property --rightFade {
    syntax: '<number>';
    inherits: false;
    initial-value: 0;
}

.mainFilterList {
    position: relative;
    top: 1rem;
    left: 1rem;
    height: 56px;
    min-width: 0;
    border-radius: 6px;
    box-sizing: border-box;
    box-shadow: 0 0 5px rgba($black, 0.6);
    background-color: rgba($white-2, 0.25);
    backdrop-filter: blur(8px);
    user-select: none;
    touch-action: none;
    overflow: hidden;
    transition:
        transform 0.3s ease-in-out,
        opacity 0.3s ease-out,
        width 0.3s ease-out;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    cursor: grab;

    &::-webkit-scrollbar {
        height: 6px;
    }

    &::-webkit-scrollbar-thumb {
        background-color: rgba($white-0, 0.3);
        border-radius: 3px;
    }

    &.hidden {
        opacity: 0;
    }
}

.mainFilterContentContainer {
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    overflow-x: auto;
    overflow-y: hidden;
    padding: 0 8px;

    /* edge fade width */
    --fadeWidth: 48px;

    /* transition the numeric toggles for smooth fade */
    --leftFade: 0;
    --rightFade: 0;
    transition: --leftFade 200ms ease, --rightFade 200ms ease;

    /* Single mask gradient across the whole container.
       Logic:
       - When fade is OFF (0): edges alpha = 1 => fully visible; no masking.
       - When fade is ON (1): edges alpha = 0 at extreme, reach 1 after --fadeWidth.
    */
    mask-image: linear-gradient(
        to right,
        rgba(0, 0, 0, calc(1 - var(--leftFade))) 0,
        rgba(0, 0, 0, 1) var(--fadeWidth),
        rgba(0, 0, 0, 1) calc(100% - var(--fadeWidth)),
        rgba(0, 0, 0, calc(1 - var(--rightFade))) 100%
    );
    -webkit-mask-image: linear-gradient(
        to right,
        rgba(0, 0, 0, calc(1 - var(--leftFade))) 0,
        rgba(0, 0, 0, 1) var(--fadeWidth),
        rgba(0, 0, 0, 1) calc(100% - var(--fadeWidth)),
        rgba(0, 0, 0, calc(1 - var(--rightFade))) 100%
    );
    mask-mode: alpha;

    &.leftMaskOpacity { --leftFade: 1; }
    &.rightMaskOpacity { --rightFade: 1; }
}

.innerContainer {
    display: flex;
    align-items: center;
    gap: 4px;
    height: 100%;
}

.mainFilterContentItem {
    width: 2.5rem;
    height: 2.5rem;
    flex-shrink: 0;
    cursor: pointer;
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    transition: transform 0.2s ease;

    &:hover {
        transform: scale(1.05);
    }

    &:active {
        transform: scale(0.95);
    }
}